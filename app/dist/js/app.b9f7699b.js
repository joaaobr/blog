(function(){"use strict";var e={3729:function(e,t,n){var a=n(9242),s=n(3396);function o(e,t){const n=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(n)}var i=n(89);const r={},l=(0,i.Z)(r,[["render",o]]);var m=l,u=n(2483);function d(e,t,n,a,o,i){const r=(0,s.up)("Navbar"),l=(0,s.up)("Posts");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(l)],64)}var c=n(7139);const h=e=>((0,s.dD)("data-v-0d9b997c"),e=e(),(0,s.Cn)(),e),g=h((()=>(0,s._)("a",{class:"logo",href:"/"},"Blog",-1))),p={key:0,class:"nav-list"},w=h((()=>(0,s._)("li",null,[(0,s._)("a",{href:"/"},"Posts")],-1))),f=h((()=>(0,s._)("li",null,[(0,s._)("a",{href:"/post/create"},"Create new post")],-1))),_=["href"],y={key:1,class:"nav-list"},v=h((()=>(0,s._)("li",null,[(0,s._)("a",{href:"/"},"Posts")],-1))),b=h((()=>(0,s._)("li",null,[(0,s._)("a",{href:"/register"},"Register")],-1))),k=h((()=>(0,s._)("li",null,[(0,s._)("a",{href:"/auth"},"Auth")],-1))),T=[v,b,k];function C(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[(0,s._)("header",null,[(0,s._)("nav",null,[g,e.isLogged?((0,s.wg)(),(0,s.iD)("ul",p,[w,f,(0,s._)("li",null,[(0,s._)("a",{href:`/user/${e.name}`},(0,c.zw)(e.name),9,_)]),(0,s._)("li",null,[(0,s._)("button",{onClick:t[0]||(t[0]=(...t)=>e.logout&&e.logout(...t))},"Logout")])])):((0,s.wg)(),(0,s.iD)("ul",y,T))])])])}var D=n(4311),P=D.Z.create({baseURL:"http://localhost:3000"}),U={name:"Navbar",data(){return{name:null,id:null,isLogged:!1}},async mounted(){await this.verifyToken(),await this.getUserData()},methods:{async getUserData(){const e=this.getToken();await P.post("/user/getUserByToken",{token:e}).then((e=>{this.name=e.data.message.name,this.id=e.data.message._id}))},async verifyToken(){const e=this.getToken();if(!e)return this.isLogged=!1;const t={authorization:`Bearer ${e}`};await P.post("/auth/validate",{},{headers:t}).then((e=>this.isLogged=!0)).catch((e=>this.isLogged=!1))},getToken(){return window.localStorage.getItem("token")},logout(){window.localStorage.removeItem("token"),window.location.reload()}}};const $=(0,i.Z)(U,[["render",C],["__scopeId","data-v-0d9b997c"]]);var I=$;const W=e=>((0,s.dD)("data-v-5808dd5a"),e=e(),(0,s.Cn)(),e),L=["href"],A=W((()=>(0,s._)("br",null,null,-1)));function H(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.posts,(e=>((0,s.wg)(),(0,s.iD)("a",{key:e,href:`/post/${e.name}/${e.title}`},[(0,s.Uk)((0,c.zw)(e.title),1),A],8,L)))),128))])])}var N={name:"Auth",data(){return{posts:[]}},mounted(){this.getPosts()},methods:{async getPosts(){await P.post("/post").then((e=>this.posts=e.data.message))}}};const Z=(0,i.Z)(N,[["render",H],["__scopeId","data-v-5808dd5a"]]);var x=Z,z={name:"HomeView",components:{Posts:x,Navbar:I}};const B=(0,i.Z)(z,[["render",d]]);var O=B;function V(e,t,n,a,o,i){const r=(0,s.up)("CreateAccountVue");return(0,s.wg)(),(0,s.j4)(r)}const S=e=>((0,s.dD)("data-v-000748d0"),e=e(),(0,s.Cn)(),e),j=S((()=>(0,s._)("h1",null,"Register",-1))),Y=S((()=>(0,s._)("br",null,null,-1))),M=S((()=>(0,s._)("br",null,null,-1))),G=S((()=>(0,s._)("br",null,null,-1))),q=S((()=>(0,s._)("br",null,null,-1))),R=S((()=>(0,s._)("br",null,null,-1))),E=S((()=>(0,s._)("br",null,null,-1))),K=S((()=>(0,s._)("br",null,null,-1)));function F(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[(0,s._)("div",null,[j,Y,(0,s.wy)((0,s._)("input",{type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t)},null,512),[[a.nr,e.name]]),M,G,(0,s.wy)((0,s._)("input",{type:"email",placeholder:"E-mail","onUpdate:modelValue":t[1]||(t[1]=t=>e.email=t)},null,512),[[a.nr,e.email]]),q,R,(0,s.wy)((0,s._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t)},null,512),[[a.nr,e.password]]),E,K,(0,s._)("button",{onClick:t[3]||(t[3]=(...t)=>e.register&&e.register(...t))},"Send")])])}var J={name:"Auth",data(){return{name:null,email:null,password:null}},methods:{async register(){const e={name:this.name,email:this.email,password:this.password};await P.post("/user/create",e).then((e=>alert("Account created successfully"))).catch((e=>{404==e.response.status?window.alert(e.response.data.message):e&&alert("There was an error")}))}}};const Q=(0,i.Z)(J,[["render",F],["__scopeId","data-v-000748d0"]]);var X=Q,ee={name:"HomeView",components:{CreateAccountVue:X}};const te=(0,i.Z)(ee,[["render",V]]);var ne=te;function ae(e,t,n,a,o,i){const r=(0,s.up)("Auth",!0);return(0,s.wg)(),(0,s.j4)(r)}const se=e=>((0,s.dD)("data-v-0c0b6713"),e=e(),(0,s.Cn)(),e),oe={key:0},ie=se((()=>(0,s._)("h1",null,"Auth",-1))),re=se((()=>(0,s._)("br",null,null,-1))),le=se((()=>(0,s._)("br",null,null,-1))),me=se((()=>(0,s._)("br",null,null,-1))),ue=se((()=>(0,s._)("br",null,null,-1))),de=se((()=>(0,s._)("br",null,null,-1)));function ce(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[e.isLogged?((0,s.wg)(),(0,s.iD)("div",oe,[ie,re,(0,s.wy)((0,s._)("input",{type:"email",placeholder:"E-mail","onUpdate:modelValue":t[0]||(t[0]=t=>e.email=t)},null,512),[[a.nr,e.email]]),le,me,(0,s.wy)((0,s._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t)},null,512),[[a.nr,e.password]]),ue,de,(0,s._)("button",{onClick:t[2]||(t[2]=(...t)=>e.auth&&e.auth(...t))},"Send")])):(0,s.kq)("",!0)])}var he={name:"Auth",data(){return{name:null,email:null,password:null,isLogged:!1}},mounted(){this.validateToken()},methods:{async auth(){const e={email:this.email,password:this.password};await P.post("/auth/",e).then((e=>{window.localStorage.setItem("token",e.data.message),this.redirectToHome()})).catch((e=>{404==e.response.status?alert(e.response.data.message):alert("There was an error")}))},async validateToken(){const e=this.getToken();if(!e)return this.isLogged=!0;const t={authorization:`Bearer ${e}`};await P.post("/auth/validate",{},{headers:t}).then((e=>this.redirectToHome())).catch((e=>this.isLogged=!0))},getToken(){return window.localStorage.getItem("token")},redirectToHome(){window.location.href="/"}}};const ge=(0,i.Z)(he,[["render",ce],["__scopeId","data-v-0c0b6713"]]);var pe=ge,we={name:"AuthUser",components:{Auth:pe}};const fe=(0,i.Z)(we,[["render",ae]]);var _e=fe;function ye(e,t,n,a,o,i){const r=(0,s.up)("Navbar"),l=(0,s.up)("CreatePost",!0);return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(l)],64)}const ve=e=>((0,s.dD)("data-v-606c91ed"),e=e(),(0,s.Cn)(),e),be={key:0},ke=ve((()=>(0,s._)("h1",null,"Create new post",-1))),Te=ve((()=>(0,s._)("br",null,null,-1))),Ce=ve((()=>(0,s._)("br",null,null,-1))),De=ve((()=>(0,s._)("br",null,null,-1))),Pe=ve((()=>(0,s._)("br",null,null,-1))),Ue=ve((()=>(0,s._)("br",null,null,-1))),$e=ve((()=>(0,s._)("br",null,null,-1)));function Ie(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[e.isLogged?((0,s.wg)(),(0,s.iD)("div",be,[ke,Te,Ce,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.title=t),placeholder:"Title"},null,512),[[a.nr,e.title]]),De,Pe,(0,s.wy)((0,s._)("textarea",{id:"message","onUpdate:modelValue":t[1]||(t[1]=t=>e.message=t)},null,512),[[a.nr,e.message]]),Ue,$e,(0,s._)("button",{onClick:t[2]||(t[2]=(...t)=>e.publish&&e.publish(...t))},"Publish")])):(0,s.kq)("",!0)])}var We={name:"Auth",data(){return{title:null,message:null,email:null,isLogged:!1}},async mounted(){await this.verifyToken(),await this.getEmail()},methods:{async publish(){const e={email:this.email,title:this.title,message:this.message};await P.post("/post/create",e).then((e=>alert("Post created successfully"))).catch((e=>{if(404===e.response.status)return alert(e.response.data.message);alert("There was an error")}))},async getEmail(){const e=this.getToken();await P.post("/user/getUserByToken",{token:e}).then((e=>this.email=e.data.message.email)).catch((e=>this.redirectToAuth()))},async verifyToken(){const e=this.getToken();e||this.redirectToAuth();const t={authorization:`Bearer ${e}`};await P.post("/auth/validate",{},{headers:t}).then((e=>this.isLogged=!0)).catch((e=>this.redirectToAuth()))},getToken(){return window.localStorage.getItem("token")},redirectToAuth(){window.location.href="/auth"}}};const Le=(0,i.Z)(We,[["render",Ie],["__scopeId","data-v-606c91ed"]]);var Ae=Le,He={name:"HomeView",components:{CreatePost:Ae,Navbar:I}};const Ne=(0,i.Z)(He,[["render",ye]]);var Ze=Ne;function xe(e,t,n,a,o,i){const r=(0,s.up)("Navbar"),l=(0,s.up)("GetPost");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(l)],64)}const ze=e=>((0,s.dD)("data-v-b50a3d7c"),e=e(),(0,s.Cn)(),e),Be={id:"container"},Oe=["href"],Ve={id:"title"},Se=ze((()=>(0,s._)("br",null,null,-1))),je=ze((()=>(0,s._)("br",null,null,-1))),Ye=["href"],Me={key:0,id:"changers"},Ge=ze((()=>(0,s._)("br",null,null,-1))),qe={id:"update"},Re=["href"],Ee=ze((()=>(0,s._)("br",null,null,-1))),Ke=["href"],Fe={id:"comment"};function Je(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[(0,s._)("div",Be,[(0,s._)("p",{id:"name",style:(0,c.j5)({width:e.nameWidth})},[(0,s._)("a",{href:`/user/${this.name}`},(0,c.zw)(e.name),9,Oe)],4),(0,s._)("h1",Ve,(0,c.zw)(e.title),1),Se,(0,s._)("p",null,(0,c.zw)(e.message),1),je,(0,s._)("a",{id:"reply",href:`${this.replyLink}`},"Reply",8,Ye),e.postIsMine?((0,s.wg)(),(0,s.iD)("div",Me,[Ge,(0,s._)("button",{id:"delete",onClick:t[0]||(t[0]=(...t)=>e.deletePost&&e.deletePost(...t))},"Delete"),(0,s._)("button",qe,[(0,s._)("a",{href:`/post/update/${this.id}`},"Update",8,Re)])])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.comments,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e},[Ee,(0,s._)("p",{id:"name",style:(0,c.j5)({width:11*e.name.length+"px"})},[(0,s._)("a",{href:`/user/${e.name}`},(0,c.zw)(e.name),9,Ke)],4),(0,s._)("p",Fe,(0,c.zw)(e.message),1)])))),128))])])}var Qe={name:"Get",data(){return{title:null,message:null,name:null,id:null,nameWidth:0,titleWidth:0,comments:[],replyLink:"/auth",postIsMine:!1}},async mounted(){await this.getPost(),await this.getComments(),await this.setReplyLink(),await this.checkIfThePostIsMine(),this.setNameWidth(),this.setTitleWidth()},methods:{async getPost(){const e={name:this.$route.params.name,title:this.$route.params.title};await P.post("/post/getPost",e).then((e=>{this.title=e.data.message[0].title,this.message=e.data.message[0].message,this.name=e.data.message[0].name,this.id=e.data.message[0]._id}))},async getComments(){await P.post("/comment/find",{id:this.id}).then((e=>{this.comments=e.data.message}))},setNameWidth(){this.nameWidth=11*this.name.length+"px"},setTitleWidth(){this.titleWidth=11*this.title.length+"px"},async verifyToken(){const e=this.getToken();if(!e)return;const t={authorization:`Bearer ${e}`};await P.post("/auth/validate",{},{headers:t}).then((e=>this.isLogged=`/comment/create/${this.name}/${this.title}`))},async setReplyLink(){const e=this.getToken();if(!e)return;const t={authorization:`Bearer ${e}`};await P.post("/auth/validate",{},{headers:t}).then((e=>this.replyLink=`/comment/create/${this.name}/${this.title}`))},async deletePost(){await P.post(`/post/delete/${this.id}`).then((e=>{this.message="Successfully deleted post."})).catch((e=>alert("There was an error")))},async checkIfThePostIsMine(){const e={token:this.getToken()};await P.post("/user/getUserByToken",e).then((e=>{e.data.message.name===this.name&&(this.postIsMine=!0)}))},getToken(){return window.localStorage.getItem("token")}}};const Xe=(0,i.Z)(Qe,[["render",Je],["__scopeId","data-v-b50a3d7c"]]);var et=Xe,tt={name:"HomeView",components:{GetPost:et,Navbar:I}};const nt=(0,i.Z)(tt,[["render",xe]]);var at=nt;function st(e,t,n,a,o,i){const r=(0,s.up)("Navbar"),l=(0,s.up)("CreateComment",!0);return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(l)],64)}const ot=e=>((0,s.dD)("data-v-6745aa18"),e=e(),(0,s.Cn)(),e),it={key:0},rt=ot((()=>(0,s._)("br",null,null,-1))),lt=ot((()=>(0,s._)("br",null,null,-1)));function mt(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[e.isLogged?((0,s.wg)(),(0,s.iD)("div",it,[(0,s._)("h1",null,"Create comment for the post "+(0,c.zw)(e.title),1),rt,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.message=t),rows:"10"},null,512),[[a.nr,e.message]]),lt,(0,s._)("button",{onClick:t[1]||(t[1]=(...t)=>e.createComment&&e.createComment(...t))},"Send")])):(0,s.kq)("",!0)])}var ut={name:"CreateComment",data(){return{isLogged:!1,post_id:null,message:null,title:this.$route.params.title,name:this.$route.params.name,username:null}},async mounted(){await this.verifyToken(),await this.getUserData(),await this.getPostData()},methods:{async getUserData(){const e=this.getToken();await P.post("/user/getUserByToken",{token:e}).then((e=>this.username=e.data.message.name))},async getPostData(){const e={name:this.name,title:this.title};await P.post("/post/getPost",e).then((e=>this.post_id=e.data.message[0]._id)).catch((e=>alert("There was an error")))},async createComment(){const e={name:this.username,post_id:this.post_id,message:this.message};await P.post("/comment/create",e).then((e=>{alert("Comment created successfully!"),window.location.href=`/post/${this.name}/${this.title}`})).catch((e=>window.location.href="/"))},async verifyToken(){const e=this.getToken();e||this.redirectToAuth();const t={authorization:`Bearer ${e}`};await P.post("/auth/validate",{},{headers:t}).then((e=>this.isLogged=!0)).catch((e=>this.redirectToAuth()))},getToken(){return window.localStorage.getItem("token")},redirectToAuth(){window.location.href="/auth"}}};const dt=(0,i.Z)(ut,[["render",mt],["__scopeId","data-v-6745aa18"]]);var ct=dt,ht={name:"HomeView",components:{CreateComment:ct,Navbar:I}};const gt=(0,i.Z)(ht,[["render",st]]);var pt=gt;function wt(e,t,n,a,o,i){const r=(0,s.up)("Navbar"),l=(0,s.up)("Page");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(l)],64)}const ft=e=>((0,s.dD)("data-v-560ce1a2"),e=e(),(0,s.Cn)(),e),_t={id:"container"},yt=ft((()=>(0,s._)("br",null,null,-1))),vt=ft((()=>(0,s._)("hr",null,null,-1))),bt=ft((()=>(0,s._)("br",null,null,-1))),kt=ft((()=>(0,s._)("h2",null,"Posts",-1))),Tt=ft((()=>(0,s._)("br",null,null,-1))),Ct=["href"],Dt=ft((()=>(0,s._)("br",null,null,-1))),Pt=ft((()=>(0,s._)("h2",null,"Comments",-1))),Ut=ft((()=>(0,s._)("br",null,null,-1))),$t=["href"];function It(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[(0,s._)("div",_t,[(0,s._)("h1",null,(0,c.zw)(e.name),1),yt,vt,bt,kt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.posts,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:e},[Tt,(0,s._)("a",{href:`/post/${e.name}/${e.title}`},(0,c.zw)(t+1)+"."+(0,c.zw)(e.title),9,Ct)])))),128)),Dt,Pt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.comments,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:e},[Ut,(0,s._)("a",{href:`/comment/${e.name}/${t}`},(0,c.zw)(t+1)+"."+(0,c.zw)(e.message),9,$t)])))),128))])])}var Wt={name:"Page",data(){return{name:this.$route.params.name,posts:[],comments:[]}},async mounted(){await this.getPosts(),await this.getComments()},methods:{async getPosts(){const e={name:this.name};await P.post("/post/getPostsByUser",e).then((e=>this.posts=e.data.message)).catch((e=>this.redirectToHome()))},async getComments(){const e={name:this.name};await P.post("/comment/getCommentsByName",e).then((e=>this.comments=e.data.message)).catch((e=>this.redirectToHome()))},redirectToHome(){window.location.href="/"}}};const Lt=(0,i.Z)(Wt,[["render",It],["__scopeId","data-v-560ce1a2"]]);var At=Lt,Ht={name:"UserPage",components:{Page:At,Navbar:I}};const Nt=(0,i.Z)(Ht,[["render",wt]]);var Zt=Nt;function xt(e,t,n,a,o,i){const r=(0,s.up)("Navbar"),l=(0,s.up)("GetComment");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(l)],64)}const zt=e=>((0,s.dD)("data-v-3e30bd44"),e=e(),(0,s.Cn)(),e),Bt={id:"container"},Ot={id:"title"},Vt=["href"],St=zt((()=>(0,s._)("br",null,null,-1))),jt=["href"],Yt=zt((()=>(0,s._)("br",null,null,-1))),Mt={id:"comment"},Gt={key:0,id:"changers"},qt=zt((()=>(0,s._)("br",null,null,-1))),Rt={id:"update"},Et=["href"];function Kt(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[(0,s._)("div",Bt,[(0,s._)("p",Ot,[(0,s.Uk)("Replying to "),(0,s._)("a",{id:"linkPost",href:`/post/${e.nameUserOfPost}/${e.title}`},(0,c.zw)(e.title),9,Vt)]),St,(0,s._)("p",{id:"name",style:(0,c.j5)({width:e.nameWidth})},[(0,s._)("a",{href:`/user/${e.nameUserOfComment}`},(0,c.zw)(this.$route.params.name),9,jt)],4),Yt,(0,s._)("p",Mt,(0,c.zw)(e.comment),1),e.commentIsMine?((0,s.wg)(),(0,s.iD)("div",Gt,[qt,(0,s._)("button",{id:"delete",onClick:t[0]||(t[0]=(...t)=>e.deleteComment&&e.deleteComment(...t))},"Delete"),(0,s._)("button",Rt,[(0,s._)("a",{href:`/comment/update/${this.idComment}`},"Update",8,Et)])])):(0,s.kq)("",!0)])])}var Ft={name:"Get",data(){return{nameUserOfComment:null,title:null,comment:null,idComment:null,id:null,nameUserOfPost:null,commentIsMine:!1,nameWidth:0,index:this.$route.params.index}},async mounted(){this.setNameWidth(),await this.GetComment(),await this.getDataPost(),await this.checkIfTheCommentIsMine()},methods:{async GetComment(){const e={name:this.$route.params.name};await P.post("/comment/getCommentsByName",e).then((e=>{this.comment=e.data.message[this.index].message,this.id=e.data.message[this.index].post_id,this.idComment=e.data.message[this.index]._id,this.nameUserOfComment=e.data.message[this.index].name})).catch((e=>window.location.href="/"))},async getDataPost(){const e={id:this.id};await P.post("/post/getPostById",e).then((e=>{this.title=e.data.message.title,this.nameUserOfPost=e.data.message.name}))},async checkIfTheCommentIsMine(){const e={token:this.getToken()};await P.post("/user/getUserByToken",e).then((e=>{e.data.message.name===this.nameUserOfComment&&(this.commentIsMine=!0)}))},getToken(){return window.localStorage.getItem("token")},setNameWidth(){this.nameWidth=11*this.$route.params.name.length+"px"},async deleteComment(){await P.post(`/comment/delete/${this.idComment}`).then((e=>this.comment="Successfully deleted comment.")).catch((e=>alert("There was an error")))}}};const Jt=(0,i.Z)(Ft,[["render",Kt],["__scopeId","data-v-3e30bd44"]]);var Qt=Jt,Xt={name:"UserPage",components:{GetComment:Qt,Navbar:I}};const en=(0,i.Z)(Xt,[["render",xt]]);var tn=en;function nn(e,t,n,a,o,i){const r=(0,s.up)("Navbar"),l=(0,s.up)("UpdateComment",!0);return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(l)],64)}const an=e=>((0,s.dD)("data-v-701f5f6b"),e=e(),(0,s.Cn)(),e),sn={key:0},on=an((()=>(0,s._)("h1",null,"Update comment",-1))),rn=an((()=>(0,s._)("br",null,null,-1))),ln=an((()=>(0,s._)("br",null,null,-1)));function mn(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[e.isLogged?((0,s.wg)(),(0,s.iD)("div",sn,[on,rn,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.message=t),rows:"10"},null,512),[[a.nr,e.message]]),ln,(0,s._)("button",{onClick:t[1]||(t[1]=(...t)=>e.update&&e.update(...t))},"Update")])):(0,s.kq)("",!0)])}var un={name:"CreateComment",data(){return{message:null,name:null,isLogged:!1,id:this.$route.params.id}},async mounted(){await this.getCommentData(),await this.verifyToken()},methods:{async getCommentData(){const e={id:this.id};await P.post("/comment/getCommentsById",e).then((e=>{this.id=e.data.message._id,this.name=e.data.message.name,this.message=e.data.message.message})).catch((e=>alert("There was an error")))},async verifyToken(){const e=this.getToken();e||this.redirectToAuth(),await P.post("/user/getUserByToken",{token:e}).then((e=>{if(e.data.message.name===this.name)return this.isLogged=!0;this.redirectToHome()})).catch((e=>this.redirectToAuth()))},getToken(){return window.localStorage.getItem("token")},async update(){const e={message:this.message};await P.post(`/comment/update/${this.id}`,e).then((e=>{alert("Comment successfully updated"),this.redirectToHome()})).catch((e=>alert("There was an error")))},redirectToAuth(){window.location.href="/auth"},redirectToHome(){window.location.href="/"}}};const dn=(0,i.Z)(un,[["render",mn],["__scopeId","data-v-701f5f6b"]]);var cn=dn,hn={name:"UserPage",components:{UpdateComment:cn,Navbar:I}};const gn=(0,i.Z)(hn,[["render",nn]]);var pn=gn;function wn(e,t,n,a,o,i){const r=(0,s.up)("Navbar"),l=(0,s.up)("UpdatePost",!0);return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(l)],64)}const fn=e=>((0,s.dD)("data-v-bdaabd3a"),e=e(),(0,s.Cn)(),e),_n={key:0},yn=fn((()=>(0,s._)("h1",null,"Update post",-1))),vn=fn((()=>(0,s._)("br",null,null,-1))),bn=fn((()=>(0,s._)("br",null,null,-1))),kn=fn((()=>(0,s._)("br",null,null,-1)));function Tn(e,t){return(0,s.wg)(),(0,s.iD)("body",null,[e.isLogged?((0,s.wg)(),(0,s.iD)("div",_n,[yn,vn,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.title=t)},null,512),[[a.nr,e.title]]),bn,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.message=t),rows:"10"},null,512),[[a.nr,e.message]]),kn,(0,s._)("button",{onClick:t[2]||(t[2]=(...t)=>e.update&&e.update(...t))},"Update")])):(0,s.kq)("",!0)])}var Cn={name:"CreateComment",data(){return{isLogged:!1,message:null,id:this.$route.params.id,name:null,title:null}},async mounted(){await this.getCommentData(),await this.verifyToken()},methods:{async getCommentData(){const e={id:this.id};await P.post("/post/getPostById",e).then((e=>{this.id=e.data.message._id,this.name=e.data.message.name,this.message=e.data.message.message,this.title=e.data.message.title})).catch((e=>alert("There was an error")))},async verifyToken(){const e=this.getToken();e||this.redirectToAuth();const t={token:e};await P.post("/user/getUserByToken",t).then((e=>{e.data.message.name===this.name?this.isLogged=!0:this.redirectToAuth()})).catch((e=>this.redirectToAuth()))},getToken(){return window.localStorage.getItem("token")},async update(){const e={title:this.title,message:this.message};await P.post(`/post/update/${this.id}`,e).then((e=>{alert("Post successfully updated"),window.location.href="/"})).catch((e=>alert("There was an error")))},redirectToAuth(){window.location.href="/auth"}}};const Dn=(0,i.Z)(Cn,[["render",Tn],["__scopeId","data-v-bdaabd3a"]]);var Pn=Dn,Un={name:"UserPage",components:{UpdatePost:Pn,Navbar:I}};const $n=(0,i.Z)(Un,[["render",wn]]);var In=$n;const Wn=[{path:"/",name:"home",component:O},{path:"/register",name:"register",component:ne},{path:"/auth",name:"auth",component:_e},{path:"/post/create",name:"createPost",component:Ze},{path:"/post/:name/:title",name:"post",component:at},{path:"/comment/create/:name/:title",name:"createComment",component:pt},{path:"/user/:name",name:"UserPage",component:Zt},{path:"/comment/:name/:index",name:"ViewComment",component:tn},{path:"/comment/update/:id",name:"UpdateComment",component:pn},{path:"/post/update/:id",name:"UpdatePost",component:In}],Ln=(0,u.p7)({history:(0,u.PO)("/"),routes:Wn});var An=Ln;(0,a.ri)(m).use(An).mount("#app")}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,s,o){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],s=e[u][1],o=e[u][2];for(var r=!0,l=0;l<a.length;l++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(r=!1,o<i&&(i=o));if(r){e.splice(u--,1);var m=s();void 0!==m&&(t=m)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,o,i=a[0],r=a[1],l=a[2],m=0;if(i.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var u=l(n)}for(t&&t(a);m<i.length;m++)o=i[m],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},a=self["webpackChunkapp"]=self["webpackChunkapp"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(3729)}));a=n.O(a)})();
//# sourceMappingURL=app.b9f7699b.js.map